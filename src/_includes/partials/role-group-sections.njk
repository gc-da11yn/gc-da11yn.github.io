{# expects: lang, locale, rolesData, groupRoleKeys, collections, pathPrefix, landingPage, alerts #}
{% for rk in groupRoleKeys %}
{% set label = rolesData.labels[lang][rk] or rk %}
{% set anchor = label | stripTagsSlugify %}
{% set items = collections.rolePages
| byAnyRole([rk])
| localeMatch(locale)
| sort(false, false, 'data.title') %}

<section class="mrgn-bttm-xl">
	<h2 id="{{ anchor }}">{{ label }}</h2>
	<p><a href="{{ pathPrefix }}{{ permalinkPrefix }}{{ locale }}/roles/{{ rk }}/">{% if lang == 'fr' %}Aller Ã  la page {{ label | lower }}{% else %}Go to {{ label | lower }} page{% endif %}</a>{% if items.length %} <small class="text-muted">({{ items.length }})</small>{% endif %}</p>

	{% if items.length %}
	<div class="row wb-eqht mrgn-tp-lg gc-drmt">
		{% for item in items %}
		<div class="col-md-6">
			<h3 class="h4">
				<a{% if item.data.redirect %} rel="external" {% endif %}
					 href="{% if item.data.redirect %}{{ item.data.redirect }}{% else %}{{ pathPrefix }}{{ item.url }}{% endif %}"
					 {% if item.data.oneLanguage %} hreflang="{{ landingPage[locale].otherLang }}" {% endif %}>
					{% if item.data.internal === true %}
					<span class="fas fa-external-link-square-alt mrgn-lft-sm mrgn-rght-sm" aria-hidden="true"></span>
					<span class="wb-inv"> {{ alerts[locale].hiddenTextLink }}</span>
					{% endif %}
					{{ item.data.title | safe }}
					{% if item.data.oneLanguage %}<small> {{ landingPage[locale].otherLangOnly }}</small>{% endif %}
					</a>
			</h3>
			<p>
				{% if item.data.description %}
				{{ item.data.description | safe }}
				{% else %}
				{{ landingPage[locale].descriptionNoneText }}
				{% endif %}
			</p>
		</div>
		{% endfor %}
	</div>
	{% else %}
	{% set variant = "group" %}
	{% include "partials/role-content-coming-soon.njk" %}
	{% endif %}
</section>
{% endfor %}
