backend:
  name: github
  repo: gc-da11yn/gc-da11yn.github.io
  branch: main # Base branch for PRs
  base_url: https://api.netlify.com  # Netlify's OAuth provider
  auth_endpoint: auth                 # OAuth endpoint
  # open_authoring: true # Uncomment to allow fork-based contributions

# Uncomment for local development testing
# local_backend: true

# Media files configuration
media_folder: "src/_images"
public_folder: "/img"

# Publish mode
publish_mode: editorial_workflow

# Site URL for deploy previews
site_url: https://a11ycanada.netlify.app
# Deploy preview template - {{branch}} is replaced with PR branch name
# Resources page path appended to preview URL
deploy_preview_url: https://deploy-preview-{{pr_number}}--a11ycanada.netlify.app

# NOTE: Topic options below should match src/_data/resourceTopics.js
# If you add/modify topics, update BOTH files to keep them in sync

# i18n configuration for bilingual content
i18n:
  structure: multiple_folders
  locales: [en, fr]
  default_locale: en

# Collections - Organize by content type
collections:
  # Resources Collection (Bilingual)
  - name: "resources"
    label: "Resources"
    label_singular: "Resource"
    description: "Manage bilingual resource items for the Additional Resources page. Use filters to find resources by topic, or toggle 'Group by Topic' for organized view."
    folder: "src/resources"
    create: true
    slug: "{{slug}}"
    # Preview path - directs to Additional Resources page in deploy preview
    preview_path: "en/additional-resources/"
    view_filters:
      - label: "Drafts"
        field: draft
        pattern: true
      - label: "Accessible meetings and events"
        field: topic
        pattern: "Accessible meetings and events"
      - label: "Development"
        field: topic
        pattern: "Development"
      - label: "Learning"
        field: topic
        pattern: "Learning"
      - label: "Policy"
        field: topic
        pattern: "Policy"
      - label: "Procurement"
        field: topic
        pattern: "Procurement"
      - label: "Services"
        field: topic
        pattern: "Services"
    view_groups:
      - label: "Topic"
        field: topic
    sortable_fields: ["title", "topic"]
    summary: "{{title}} ({{topic}})"
    i18n: true
    editor:
      preview: false
    fields:
      - label: "Title"
        name: "title"
        widget: "string"
        i18n: true
        hint: "Resource title (provide both English and French)"
      - label: "Description"
        name: "description"
        widget: "text"
        i18n: true
        hint: "May include HTML tags like <abbr>, <strong>, etc."
      - label: "URL"
        name: "url"
        widget: "string"
        i18n: true
        hint: "Full URL to the resource (provide both English and French)"
      - label: "Topic"
        name: "topic"
        widget: "select"
        i18n: duplicate
        options:
          - label: "Accessible meetings and events"
            value: "Accessible meetings and events"
          - label: "Development"
            value: "Development"
          - label: "Learning"
            value: "Learning"
          - label: "Policy"
            value: "Policy"
          - label: "Procurement"
            value: "Procurement"
          - label: "Services"
            value: "Services"
        hint: "Category for grouping resources (same for both languages - set in English tab)"
      - label: "Internal Links"
        name: "internalLinks"
        widget: "boolean"
        default: false
        required: false
        i18n: duplicate
        hint: "Check if resource requires GC network access (same for both languages - set in English tab)"
      - label: "Language Availability"
        name: "languageAvailability"
        widget: "select"
        default: "both"
        required: false
        i18n: duplicate
        options:
          - { label: "Available in both languages", value: "both" }
          - { label: "English only", value: "en" }
          - { label: "French only", value: "fr" }
        hint: "Indicates if resource is only available in one language (same for both languages - set in English tab)"
      - label: "Resource Type"
        name: "resourceType"
        widget: "select"
        default: "standard"
        required: false
        i18n: duplicate
        options:
          - { label: "Standard resource", value: "standard" }
          - { label: "Parent resource (has sub-resources)", value: "parent" }
          - { label: "Child resource (belongs under a parent)", value: "child" }
        hint: "Determines heading level (same for both languages - set in English tab)"
      - label: "Parent Resource"
        name: "parentResource"
        widget: "relation"
        collection: "resources"
        search_fields: ["title"]
        value_field: "{{slug}}"
        display_fields: ["{{title}}"]
        required: false
        i18n: duplicate
        hint: "Search and select the parent resource (same for both languages - set in English tab)"
        options_length: 100
        filters:
          - field: resourceType
            values: ["parent"]
