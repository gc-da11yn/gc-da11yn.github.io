<div lang="fr">
<p>(<a href="#francais">Français</a>)</p>
</div>
<h1>Decap CMS Admin</h1>
<p>This folder contains the Decap CMS (Content Management System) configuration for the Digital Accessibility Toolkit.</p>
<h2 id="files" tabindex="-1">Files</h2>
<ul>
<li><strong>index.html</strong>: The CMS admin interface entry point</li>
<li><strong>config.yml</strong>: ⚠️ <strong>Auto-generated file</strong> - DO NOT EDIT MANUALLY
<ul>
<li>Generated by <code>scripts/generate-cms-config.js</code></li>
<li>Regenerated on every build (<code>npm run build</code>)</li>
<li>Ignored by git (not committed to repository)</li>
<li>Based on data files: <code>src/_data/tagList.js</code>, <code>roles.js</code>, <code>resourceTopics.js</code></li>
</ul>
</li>
</ul>
<h2 id="access" tabindex="-1">Access</h2>
<ul>
<li><strong>Production</strong>: Navigate to <code>https://a11ycanada.netlify.app/admin/</code> (requires GitHub account with repository access)</li>
<li><strong>Local Development</strong>: Navigate to <code>http://localhost:8080/admin/</code> (requires local backend setup)</li>
</ul>
<h2 id="authentication" tabindex="-1">Authentication</h2>
<p>The CMS uses <strong>GitHub OAuth</strong> via Netlify’s OAuth provider:</p>
<ul>
<li><strong>Login</strong>: Click “Login with GitHub”</li>
<li><strong>Requirements</strong>: GitHub account with write access to <code>gc-da11yn/gc-da11yn.github.io</code></li>
<li><strong>Workflow</strong>: Changes create pull requests; merge PRs to deploy</li>
<li><strong>No Netlify Identity</strong>: Removed in favor of direct GitHub authentication</li>
</ul>
<h2 id="what-the-cms-manages" tabindex="-1">What the CMS Manages</h2>
<h3 id="resources-collection" tabindex="-1">Resources Collection</h3>
<p>Individual resource items for the Additional Resources page with bilingual support:</p>
<ul>
<li><strong>Location</strong>: <code>src/resources/en/</code> and <code>src/resources/fr/</code></li>
<li><strong>Structure</strong>: Frontmatter-only markdown files</li>
<li><strong>i18n</strong>: Single entry point with language tabs for title/description</li>
<li><strong>Fields</strong>: title, description, url, topic (full labels), resourceType, parentResource, internalLinks, languageAvailability</li>
<li><strong>Topics</strong>: 6 categories with full labels (“Learning”, “Development”, etc.), converted to keys by collections plugin</li>
<li><strong>Parent/Child</strong>: Hierarchical resources via resourceType (standard/parent/child) and parentResource relation</li>
<li><strong>View Controls</strong>: Filter by topic with view_filters, group by topic with view_groups</li>
<li><strong>Display</strong>: Dynamic templates query collections and display alphabetically by topic with parent/child nesting</li>
</ul>
<h2 id="local-development" tabindex="-1">Local Development</h2>
<h3 id="for-regular-development-no-cms-needed" tabindex="-1">For Regular Development (no CMS needed)</h3>
<pre><code class="language-bash">npm start          # Start dev server
</code></pre>
<h3 id="for-cms-development-with-local-backend" tabindex="-1">For CMS Development (with local backend)</h3>
<pre><code class="language-bash">npm run start-cms  # Starts decap-server + dev server in parallel
</code></pre>
<p>This command automatically:</p>
<ol>
<li>Generates <code>config.yml</code> with <code>local_backend: true</code></li>
<li>Starts <code>npx decap-server</code> on port 8081</li>
<li>Starts Eleventy dev server</li>
<li>Access CMS at: <code>http://localhost:{PORT}/admin/</code>
<ul>
<li>Port is auto-detected (usually 8080, but may vary if port is in use)</li>
<li>Check console output for actual URL</li>
</ul>
</li>
</ol>
<h3 id="manual-config-generation" tabindex="-1">Manual Config Generation</h3>
<pre><code class="language-bash">npm run cms:config           # Production mode (no local backend)
npm run cms:config -- --local # Local mode (with local backend)
</code></pre>
<p><strong>Note</strong>: Config is auto-generated on <code>npm run build</code> and <code>npm run start-cms</code></p>
<h2 id="key-features" tabindex="-1">Key Features</h2>
<ul>
<li><strong>Bilingual entry</strong>: Add resources in both EN and FR with language tabs</li>
<li><strong>Auto-toggle</strong>: Cross-language linking automatically generated</li>
<li><strong>Language availability</strong>: Mark resources as “both”, “en”, or “fr”</li>
<li><strong>Topic organization</strong>: 6 topics with full labels in CMS, converted to keys in collections</li>
<li><strong>Parent/child resources</strong>: Create hierarchical resource collections (parent with related children)</li>
<li><strong>View controls</strong>: Filter resources by topic or toggle “Group by Topic” for organized display</li>
<li><strong>Internal links flag</strong>: Indicate GC network-only resources</li>
<li><strong>Pull request workflow</strong>: Changes create PRs for review before deployment</li>
<li><strong>Individual attribution</strong>: GitHub accounts provide clear authorship of changes</li>
</ul>
<h2 id="documentation" tabindex="-1">Documentation</h2>
<p>See complete documentation:</p>
<ul>
<li><strong>Implementation details</strong>: <code>/docs/implementation/decap-cms-implementation.md</code></li>
<li><strong>Quick setup guide</strong>: <code>/DECAP-CMS-SETUP.md</code></li>
<li><strong>Decap CMS docs</strong>: <a href="https://decapcms.org/docs/">decapcms.org/docs</a></li>
</ul>
<hr>
<div lang="fr" id="francais">
<p>(<a href="#decap-cms-admin">English</a>)</p>
</div>
<h1>Administration de Decap CMS</h1>
<p>Ce dossier contient la configuration du système de gestion de contenu (CMS) Decap pour la Boîte à outils de l’accessibilité numérique.</p>
<h2 id="fichiers" tabindex="-1">Fichiers</h2>
<ul>
<li><strong>index.html</strong> : Point d’entrée de l’interface d’administration CMS</li>
<li><strong>config.yml</strong> : ⚠️ <strong>Fichier auto-généré</strong> - NE PAS MODIFIER MANUELLEMENT
<ul>
<li>Généré par <code>scripts/generate-cms-config.js</code></li>
<li>Régénéré à chaque construction (<code>npm run build</code>)</li>
<li>Ignoré par git (non validé dans le dépôt)</li>
<li>Basé sur les fichiers de données : <code>src/_data/tagList.js</code>, <code>roles.js</code>, <code>resourceTopics.js</code></li>
</ul>
</li>
</ul>
<h2 id="acces" tabindex="-1">Accès</h2>
<ul>
<li><strong>Production</strong> : Naviguez vers <code>https://a11ycanada.netlify.app/admin/</code> (nécessite un compte GitHub avec accès au dépôt)</li>
<li><strong>Développement local</strong> : Naviguez vers <code>http://localhost:8080/admin/</code> (nécessite la configuration du backend local)</li>
</ul>
<h2 id="authentification" tabindex="-1">Authentification</h2>
<p>Le CMS utilise <strong>GitHub OAuth</strong> via le fournisseur OAuth de Netlify :</p>
<ul>
<li><strong>Connexion</strong> : Cliquez sur “Login with GitHub”</li>
<li><strong>Exigences</strong> : Compte GitHub avec accès en écriture à <code>gc-da11yn/gc-da11yn.github.io</code></li>
<li><strong>Flux de travail</strong> : Les modifications créent des pull requests; fusionner les PR pour déployer</li>
<li><strong>Pas de Netlify Identity</strong> : Supprimé en faveur de l’authentification GitHub directe</li>
</ul>
<h2 id="authentification-1" tabindex="-1">Authentification</h2>
<p>Le CMS utilise <strong>GitHub OAuth</strong> via le fournisseur OAuth de Netlify :</p>
<ul>
<li><strong>Connexion</strong> : Cliquez sur “Login with GitHub”</li>
<li><strong>Exigences</strong> : Compte GitHub avec accès en écriture à <code>gc-da11yn/gc-da11yn.github.io</code></li>
<li><strong>Flux de travail</strong> : Les modifications créent des pull requests; fusionner les PR pour déployer</li>
<li><strong>Pas de Netlify Identity</strong> : Supprimé en faveur de l’authentification GitHub directe</li>
</ul>
<h2 id="ce-que-le-cms-gere" tabindex="-1">Ce que le CMS gère</h2>
<h3 id="collection-ressources" tabindex="-1">Collection Ressources</h3>
<p>Éléments de ressources individuels pour la page Ressources additionnelles avec support bilingue :</p>
<ul>
<li><strong>Emplacement</strong> : <code>src/resources/en/</code> et <code>src/resources/fr/</code></li>
<li><strong>Structure</strong> : Fichiers markdown frontmatter uniquement</li>
<li><strong>i18n</strong> : Point d’entrée unique avec onglets de langue pour titre/description</li>
<li><strong>Champs</strong> : title, description, url, topic (étiquettes complètes), resourceType, parentResource, internalLinks, languageAvailability</li>
<li><strong>Sujets</strong> : 6 catégories avec étiquettes complètes (“Apprentissage”, “Développement”, etc.), converties en clés par plugin collections</li>
<li><strong>Parent/Enfant</strong> : Ressources hiérarchiques via resourceType (standard/parent/child) et relation parentResource</li>
<li><strong>Contrôles d’affichage</strong> : Filtrer par sujet avec view_filters, regrouper par sujet avec view_groups</li>
<li><strong>Affichage</strong> : Les modèles dynamiques interrogent les collections et affichent alphabétiquement par sujet avec imbrication parent/enfant</li>
</ul>
<h2 id="developpement-local" tabindex="-1">Développement local</h2>
<h3 id="pour-le-developpement-regulier-cms-non-necessaire" tabindex="-1">Pour le développement régulier (CMS non nécessaire)</h3>
<pre><code class="language-bash">npm start          # Démarrer le serveur de développement
</code></pre>
<h3 id="pour-le-developpement-cms-avec-backend-local" tabindex="-1">Pour le développement CMS (avec backend local)</h3>
<pre><code class="language-bash">npm run start-cms  # Démarre decap-server + serveur de développement en parallèle
</code></pre>
<p>Cette commande automatiquement :</p>
<ol>
<li>Génère <code>config.yml</code> avec <code>local_backend: true</code></li>
<li>Démarre <code>npx decap-server</code> sur le port 8081</li>
<li>Démarre le serveur de développement Eleventy</li>
<li>Accédez au CMS à : <code>http://localhost:{PORT}/admin/</code>
<ul>
<li>Le port est détecté automatiquement (généralement 8080, mais peut varier si le port est utilisé)</li>
<li>Vérifiez la sortie de la console pour l’URL réelle</li>
</ul>
</li>
</ol>
<h3 id="generation-manuelle-de-configuration" tabindex="-1">Génération manuelle de configuration</h3>
<pre><code class="language-bash">npm run cms:config           # Mode production (sans backend local)
npm run cms:config -- --local # Mode local (avec backend local)
</code></pre>
<p><strong>Note</strong> : La configuration est auto-générée lors de <code>npm run build</code> et <code>npm run start-cms</code></p>
<h2 id="fonctionnalites-cles" tabindex="-1">Fonctionnalités clés</h2>
<ul>
<li><strong>Entrée bilingue</strong> : Ajoutez des ressources en EN et FR avec des onglets de langue</li>
<li><strong>Bascule automatique</strong> : Liaison inter-langues générée automatiquement</li>
<li><strong>Disponibilité linguistique</strong> : Marquez les ressources comme “both”, “en” ou “fr”</li>
<li><strong>Organisation par sujet</strong> : 6 sujets avec étiquettes complètes dans CMS, converties en clés dans collections</li>
<li><strong>Ressources parent/enfant</strong> : Créer des collections de ressources hiérarchiques (parent avec enfants associés)</li>
<li><strong>Contrôles d’affichage</strong> : Filtrer les ressources par sujet ou activer “Group by Topic” pour affichage organisé</li>
<li><strong>Indicateur de liens internes</strong> : Indiquez les ressources du réseau du GC uniquement</li>
<li><strong>Flux de travail de pull request</strong> : Les modifications créent des PR pour révision avant déploiement</li>
<li><strong>Attribution individuelle</strong> : Les comptes GitHub fournissent une paternité claire des modifications</li>
</ul>
<h2 id="documentation-1" tabindex="-1">Documentation</h2>
<p>Consultez la documentation complète :</p>
<ul>
<li><strong>Détails de mise en œuvre</strong> : <code>/docs/implementation/decap-cms-implementation.md</code></li>
<li><strong>Guide de configuration rapide</strong> : <code>/DECAP-CMS-SETUP.md</code></li>
<li><strong>Documentation Decap CMS</strong> : <a href="https://decapcms.org/docs/">decapcms.org/docs</a></li>
</ul>
